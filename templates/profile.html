{% extends "layout.html" %}

{% block title %}
    {{item}}
{% endblock %}

{% block head %}
<script language="JavaScript">
    $(document).ready(function(){

        //Assure user delete button is clicked
        $('#delete_friend').click(function(){
            $('#message').html("Deleting {{item}}...");
        });

        //assure user Update button is clicked
        $('#update').click(function(){
            $('message').html("Updating {{name}}'s profile...");
        });

        //set cursor at the end of each text area when tabbed in
        $('textarea').on('keyup', function(event){
            if (event.which == 9) {
                var text = $(this).val();
                $(this).focus().val("").val(text);
            }
        });

        //bullet point after enter key pressed: http://output.jsbin.com/uPALIRU/1/
        $('textarea').on('keydown',function(event){
            var text = $(this); //this text area
            switch(event.which){ //event.which returns which key was pressed
                case 13: //13 is enter key
                    text.val(text.val()+'\n• ');
                    return false;
            }
        });

        //add first bullet to empty fields
        $('textarea').click(function(){
           if($(this).val() == ""){
               $(this).val("• ");
           }
        });
    });



</script>
{% endblock %}

{% block main %}
    <div class="header">{{item}}</div><br>

    <!-- Friend Info: Name, Interest -->
    <form action="{{ url_for('edit', id=id) }}" name="profile" method="post">
        <fieldset>
            <table align="center">
                <tr>
                    <td align="right">Interests</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="interest" rows="3" id="variables">{{interest}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Dislikes</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="dislike" rows="3" id="variables">{{dislike}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Life Plans</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="plan" rows="3" id="variables">{{plan}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Stories</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="story" rows="3" id="variables">{{story}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Potential To-Do's</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="todo" rows="3" id="variables">{{todo}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Shared Events</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="event" rows="3" id="variables">{{event}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Work / School</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="work" rows="3" id="variables">{{work}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">Inspiring Quotes</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="quote" rows="3" id="variables">{{quote}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td align="right">General Notes</td>
                    <td align="left"><div class="form-group">
                        <textarea class="form-control" name="note" rows="3" id="variables">{{note}}</textarea>
                    </div></td>
                </tr>
                <tr>
                    <td colspan="2"><div class="form-group gray">
                        <button class="btn btn-default" type="submit" id="update">Update</button>
                        <a href="{{ url_for('delete', id=id) }}"><button class="btn btn-default" type="button" id="delete_friend">Delete</button></a>
                        <br><span class="error">{{message}}</span>
                        <p id='message' class='error'></p>
                    </div></td>
                </tr>
            </table>
        </fieldset>
    </form>
{% endblock %}
